<div class="row row-sm">
  <div class="col-sm-12 col-md-5 padding-sm map-container">
      <pnx-map class="map-card" height="95  vh"> </pnx-map>
  </div>
  <div class="col-sm-12 col-md-7 padding-sm form-container">
    <div class="card">
      <div class="card-header">
        <h4 > Relevé</h4>
        <button 
          matTooltip="Edit relevé {{id}}"
          type="button" id="edit"
          class="btn btn-success"
          [disabled]="userReleveCruved?.E == false">
            <i 
            class="fa fa-pencil-square-o fa-lg"
            aria-hidden="true" 
            (click)="fs.onEditReleve(id)">
            </i>
        </button>

      </div>


      <div class="card-block releve">
        <p><b> Relevé numéro </b>: {{releve?.id}} <b> Observateur(s) </b>: {{observers}} </p>
        <p> <b> Entre le  </b>: {{dateMin}}  <b> et le </b>: {{dateMax}}  </p> 
        <p> <b> Altitude min  </b>: {{releve?.properties.altitude_min }}<b> Altitude max  </b>: {{releve?.properties.altitude_max }} </p>

        <div class="row row-sm">
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-0">
            <pnx-datasets
            label="{{ 'Releve.Dataset' | translate }}"
            [parentFormControl]="releveForm.controls.properties.controls.id_dataset"
            appId="14"
            [disabled]=disabled>
          </pnx-datasets>
          </div>
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 padding-sm">
            <pnx-nomenclature
            label= "{{ 'Releve.ObsTechnique' | translate }}"
            [parentFormControl]="releveForm.controls.properties.controls.id_nomenclature_obs_technique"
            [idTypeNomenclature]="100"
            [disabled]=disabled
          >
          </pnx-nomenclature>
          </div>
          <div *ngIf="validationConfig.form_fields.releve.group_type" class="col-xs-3 col-sm-3 col-md-3 col-lg-3 padding-sm">
              <pnx-nomenclature label="{{ 'Releve.GroupType' | translate }}" [parentFormControl]="releveForm.controls.properties.controls.id_nomenclature_grp_typ"
                [idTypeNomenclature]="24" [disabled]="disabled">
              </pnx-nomenclature>
          </div>
        </div>


        <p id="info-geo"> <pnx-areas-intersected-modal [geojson]="releve"> </pnx-areas-intersected-modal> </p>

          <label> {{ 'Taxon.ObservedTaxon' | translate }} </label>
                  
    </div>
    
    <div *ngIf="selectedOccurrence" class="card info-occurrence">
      <label class="card-header"> <b> Détails: </b>  {{selectedOccurrence?.taxon?.nom_valide}} </label>
      <div class="card-block">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#occurrence" role="tab">Info observation</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#counting" role="tab">Dénombrement</a>
          </li>
        </ul>
        <!-- OCCURRENCE -->
        <!-- Tab panes -->
        <div class="tab-content">
          <div class="tab-pane active" id="occurrence" role="tabpanel">
            <div class="row row-sm">
              <div *ngIf="validationConfig.form_fields.occurrence.observation_status" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                  <pnx-nomenclature 
                    label="{{ 'Taxon.ObservationStatus' | translate }}"
                    [parentFormControl]="occurrenceForm.controls.id_nomenclature_observation_status"
                    [idTypeNomenclature]="18"
                    [disabled]="disabled"
                    >
                  </pnx-nomenclature>
              </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                  <pnx-nomenclature 
                    label="{{ 'Taxon.ObsMethod' | translate }}"
                    [parentFormControl]="occurrenceForm.controls.id_nomenclature_obs_meth"
                    [idTypeNomenclature]="14" 
                    [disabled]="disabled">
                  </pnx-nomenclature>
              </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                  <pnx-nomenclature 
                    label="{{ 'Taxon.BiologicalCondition' | translate }}"
                    [parentFormControl]="occurrenceForm.controls.id_nomenclature_bio_condition"
                    [idTypeNomenclature]="7" 
                    [disabled]="disabled" > 
                  </pnx-nomenclature>
                </div>
              </div>


              <div class="row row-sm">
                  <div *ngIf="validationConfig.form_fields.occurrence.determination_method" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                      <pnx-nomenclature 
                        label="{{ 'Taxon.DeterminationMethod' | translate }}"
                        [parentFormControl]="occurrenceForm.controls.id_nomenclature_determination_method"
                        [idTypeNomenclature]="106"
                        [disabled]="disabled"
                        >
                      </pnx-nomenclature>
                  </div>
                  <div *ngIf="validationConfig.form_fields.occurrence.bio_status" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                    <pnx-nomenclature 
                      label="{{ 'Taxon.BiologicalStatus' | translate }}"
                      [parentFormControl]="occurrenceForm.controls.id_nomenclature_bio_status"
                      [idTypeNomenclature]="13"
                      [disabled]="disabled"
                      > 
                    </pnx-nomenclature> 
                  </div>          
                  <div *ngIf="validationConfig.form_fields.occurrence.naturalness" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                    <pnx-nomenclature 
                      label="{{ 'Taxon.Naturalness' | translate }}"
                      [parentFormControl]="occurrenceForm.controls.id_nomenclature_naturalness"
                      [idTypeNomenclature]="8"
                      [disabled]="disabled"
                      >
                    </pnx-nomenclature>
                  </div>
                </div>


                <div class="row row-sm">
                    <div *ngIf="validationConfig.form_fields.occurrence.exist_proof" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                      <pnx-nomenclature 
                        label="{{ 'Taxon.ExistProof' | translate }}"
                        [parentFormControl]="occurrenceForm.controls.id_nomenclature_exist_proof"
                        [idTypeNomenclature]="15"
                        [disabled]="disabled"
                        >
                      </pnx-nomenclature>
                    </div>
                    <div *ngIf="validationConfig.form_fields.occurrence.digital_proof" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                      <small> {{ 'Taxon.DigitalProof' | translate }} </small>                      
                      <div class="input-group" >
                        <input [disableControl]="disabled" class="form-control form-control-sm" [formControl]="occurrenceForm.controls.digital_proof"
                          type="text"
                          >
                      </div>
                    </div>
                    <div *ngIf="validationConfig.form_fields.occurrence.non_digital_proof" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                      <small> {{ 'Taxon.NonDigitalProof' | translate }} </small>
                      <div class="input-group" >
                        <input [disableControl]="disabled" class="form-control form-control-sm" [formControl]="occurrenceForm.controls.non_digital_proof"
                          type="text"> 
                      </div>
                    </div>
                  </div>

                  <div class="row row-sm">
                      <div *ngIf="validationConfig.form_fields.occurrence.diffusion_level" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                        <pnx-nomenclature 
                          label="{{ 'Taxon.DiffusionLevel' | translate }}"
                          [parentFormControl]="occurrenceForm.controls.id_nomenclature_diffusion_level"
                          [idTypeNomenclature]="5"
                          [disabled]="disabled" 
                          >
                        </pnx-nomenclature>
                      </div>
                      <div *ngIf="validationConfig.form_fields.occurrence.blurring" class="col-xs-12 col-sm-12 col-md-12 col-lg-4 padding-sm">
                        <pnx-nomenclature 
                          label="{{ 'Taxon.Blurring' | translate }}"
                          [parentFormControl]="occurrenceForm.controls.id_nomenclature_blurring"
                          [idTypeNomenclature]="4"
                          [disabled]="disabled" 
                          >
                        </pnx-nomenclature>
                      </div>
                  </div>
                  <div class="row row-0" id="row-commentaire">
                      <div *ngIf="validationConfig.form_fields.occurrence.comment" class="col-xs-12 col-sm-12 col-md-12 col-lg-6 padding-sm">               
                        <div class="input-group" >  
                          <input
                            [disableControl]="disabled"
                              placeholder="{{ 'Releve.Comment' | translate }}"
                              class="form-control"
                              [formControl]="occurrenceForm.controls.comment" 
                              type="text">
                        </div>
                      </div>
                  </div>
          </div>

          <!-- denombrement -->
          
      <!-- end tab -->
        </div>
      </div>  
      <!-- end card selected -->
  </div>
</div>
